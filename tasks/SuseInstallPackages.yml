---
- name: Suse - Install openssh packages with Zypper
  when:
    ansible_os_family == "Suse" and
    item.value.state != "default" and
    item.value.state != "purged" and
    item.value.Suse is defined
  zypper:
    name: "{{ item.value.Suse }}"
    state: "{{ item.value.state }}"
  with_dict: "{{ aspects_openssh_packages }}"
  tags:
    - aspects_openssh
    - aspects_openssh_package_install
